<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/cs-notes/styles.7f67dccd6da6a9c0ed60.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.grds-color{flex-basis:300px!important;max-width:300px!important}.grds-wrapper{color:#000;margin-bottom:24px}@media (max-width:700px){.grds-wrapper{flex-basis:100%!important;max-width:100%!important;margin:0 0 24px}}.grds-audio{margin-right:10px}.grds-audio__container{background:#f4f6f8;padding:20px;border-radius:10px;width:100%}.grds-audio__title{margin-bottom:1rem;display:flex;align-items:center}.grds-audio__title svg{height:25px;width:25px;fill:#48ba6f;margin-right:1.5rem}.grds-audio__audiofile{width:100%}.grds-color{display:inline-block!important;margin-right:10px}@media (max-width:700px){.grds-color{display:block!important}}.grds-color__container{border-radius:10px;width:300px;display:flex;flex-direction:column}@media (max-width:700px){.grds-color__container{width:100%}}.grds-color__swatch{height:150px;border-radius:10px 10px 0 0;position:relative;display:flex;align-items:flex-end;padding-bottom:10px;justify-content:center}.grds-color__swatch__a11y{display:flex;flex-direction:column;width:50px;margin:0 3px}.grds-color__swatch__a11y__char{color:#fff;text-align:center}.grds-color__swatch__a11y__status{color:#fff;background:#000;padding:2px 5px;display:inline-block;border-radius:5px;font-size:.9rem;text-align:center}.grds-color__info{display:flex;flex-wrap:wrap;padding:10px;background:#f4f6f8;border-radius:0 0 10px 10px}.grds-color__info__item{margin-bottom:1rem;margin-top:.5rem;flex-basis:50%}.grds-color__info__item .clippy{display:inline-block}.grds-color__info__item p:first-child{text-transform:uppercase;color:#7d858c;font-size:.75rem}.grds-color__info__item p{margin-bottom:.25rem;margin-top:.5rem}.grds-color-palette__container{background:#f4f6f8;border-radius:10px;width:100%}.grds-color-palette__item{padding:20px;border-bottom:2px solid #c5d3e0;display:flex;justify-content:space-between;flex-wrap:wrap}.grds-color-palette__item:last-child{border-bottom:none}.grds-color-palette__left,.grds-color-palette__right{display:flex;align-items:center;flex-wrap:wrap}.grds-color-palette__item__swatch{width:50px;height:50px;border-radius:10px;margin-right:20px;margin-top:10px;margin-bottom:10px}.grds-color-palette__item__name{padding:.5rem 1rem .5rem 0}.grds-color-palette__item__color:first-child{width:115px}.grds-color-palette__item__color{margin:.4rem 0;width:140px}.grds-color-palette__item__color span:first-child{background:#c5d3e0;color:#2e2e2e;padding:3px 5px;font-size:.7rem;border-radius:5px}.grds-color-palette__item__color span:last-child{margin-left:.25rem;font-size:.9rem}.grds-download{margin-right:10px}.grds-download__container{background:#f4f6f8;padding:20px;border-radius:10px;width:100%;text-decoration:none}.grds-download__info{justify-content:space-between}.grds-download__info,.grds-download__info__left{display:flex;align-items:center}.grds-download__info__left svg{height:25px;width:25px;fill:#48ba6f;margin-right:1.5rem}.grds-download__info__right{font-size:.75rem;color:#7d858c}.grds-download__preview{padding:20px;border-radius:10px;margin-top:40px;display:flex;justify-content:center;box-shadow:0 5px 15px rgba(0,0,0,.1)}.grds-download__image{-o-object-fit:cover;object-fit:cover;height:100%;margin-bottom:0}.grds-example{border-radius:10px;border:1px solid #c5d3e0}.grds-example__container,.grds-hint{padding:20px}.grds-hint{border-radius:10px;background:#f4f6f8;color:#7a7d80;border:1px solid #d9eafa;width:100%}.grds-hint__directive{background:#ecfaea;color:#307c3f;border:1px solid #c0ebc8}.grds-hint__warning{background:#fef5f5;color:#c93a3c;border:1px solid #fcddde}.grds-typo__container{width:100%}.grds-typo__item{display:flex;flex-direction:column;border-bottom:2px solid #c5d3e0;padding-bottom:1rem;margin-bottom:2rem}.grds-typo__item__name{margin-bottom:1.5rem}.grds-typo__item__info{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;width:100%}.grds-typo__item__info p:first-child{text-transform:uppercase;font-size:.75rem;color:#7d858c;margin-bottom:0}.grds-typo__item__info p:last-child{margin-top:.5rem}.grds-typo__item__info__desc{margin-right:2rem}.grds-video{margin-right:10px}.grds-video__container{background:#f4f6f8;padding:20px;border-radius:10px;width:100%}.grds-video__title{margin-bottom:15px;display:flex;align-items:center}.grds-video__title svg{height:25px;width:25px;fill:#48ba6f;margin-right:1.5rem}.grds-video__videofile{width:100%}.clippy:hover{cursor:pointer}.tooltipped{position:relative}.tooltipped:after{z-index:1000000;padding:.1rem .3rem;font:normal normal 11px/1.5 sans-serif;-webkit-font-smoothing:subpixel-antialiased;color:#fff;text-align:center;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;content:attr(aria-label);background:#000;border-radius:3px}.tooltipped:after,.tooltipped:before{position:absolute;display:inline-block;text-decoration:none;pointer-events:none}.tooltipped:before{z-index:1000001;width:0;height:0;color:#000;content:"";border:6px solid transparent}.tooltipped-n:after{right:50%;bottom:100%;margin-bottom:6px}.tooltipped-n:before{top:-7px;right:50%;bottom:auto;margin-right:-6px;border-top-color:#000}.tooltipped-n:after{transform:translateX(50%)}.s11jhqd8{height:60px;width:100%;background-color:#639}.h2h01z2{margin:0;max-width:960px;padding:20px 1rem}.hkd2pf6{margin:0}.h6fgol{color:#fff;-webkit-text-decoration:none;text-decoration:none}.s1x3km3v{border-right:1px solid #d3d3d3;width:350px;height:100%;min-height:100%;padding:1rem}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#___gatsby,#gatsby-focus-wrapper,body,html{height:100%;width:100%;overflow:hidden}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.5 georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:georgia,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.51572rem}h3{font-size:1.31951rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}.ggj4icz{display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto 1fr;grid-template-areas:"header header" "sidebar main";min-height:100%;height:100%}.hug0csx{grid-area:header}.s1p3sm64{grid-area:sidebar}.m1dsv0mj{grid-area:main;overflow-y:scroll}.c1swtufw{padding:1.5rem;margin:0 auto;max-width:960px}</style><meta name="generator" content="Gatsby 2.20.35"/><title data-react-helmet="true"></title><link rel="icon" href="/cs-notes/favicon-32x32.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="manifest" href="/cs-notes/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/cs-notes/icons/icon-48x48.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="72x72" href="/cs-notes/icons/icon-72x72.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="96x96" href="/cs-notes/icons/icon-96x96.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="144x144" href="/cs-notes/icons/icon-144x144.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="192x192" href="/cs-notes/icons/icon-192x192.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="256x256" href="/cs-notes/icons/icon-256x256.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="384x384" href="/cs-notes/icons/icon-384x384.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="512x512" href="/cs-notes/icons/icon-512x512.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link as="script" rel="preload" href="/cs-notes/webpack-runtime-5bb415d6ec02a3077fde.js"/><link as="script" rel="preload" href="/cs-notes/framework-a74044b4add31353c05b.js"/><link as="script" rel="preload" href="/cs-notes/app-3326c647442d9cdf5b1f.js"/><link as="script" rel="preload" href="/cs-notes/styles-6b8affa5cc22cb60670e.js"/><link as="script" rel="preload" href="/cs-notes/3925cf68b2c2d0cc1d85efad3e08a114191829f9-472ce0b777b01331616f.js"/><link as="script" rel="preload" href="/cs-notes/component---src-templates-notes-js-d8a721f12764927d7a7b.js"/><link as="fetch" rel="preload" href="/cs-notes/page-data/operating-system/inter-process-communication/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/cs-notes/page-data/app-data.json" crossorigin="anonymous"/><style data-linaria-critical="/operating-system/inter-process-communication"></style></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="ggj4icz"><div class="hug0csx"><header class="s11jhqd8"><div class="h2h01z2"><h5 class="hkd2pf6"><a class="h6fgol" href="/cs-notes/">CS Study Notes</a></h5></div></header></div><div class="s1p3sm64"><nav class="s1x3km3v" role="navigation"><legend></legend><ul><li><legend>Java</legend><ul><li><a href="/cs-notes/java/collection-framework">Java Collection Framework</a></li><li><a href="/cs-notes/java/io">I/O in Java</a></li><li><a href="/cs-notes/java/jmm">Java Memory Model (JMM)</a></li><li><a href="/cs-notes/java/jvm">Java Virtual Machine (JVM)</a></li><li><a href="/cs-notes/java/multithreading-concurrency">Multi-threading and Concurrency in Java</a></li></ul></li><li><a href="/cs-notes/k8s">Kubernetes (K8s)</a></li><li><a href="/cs-notes/mysql">MySQL</a></li><li><legend>Networking</legend><ul><li><a href="/cs-notes/networking/http">HTTP</a></li><li><a href="/cs-notes/networking/transport-layer-protocols">Transport Layer Protocols</a></li></ul></li><li><legend>Operating System</legend><ul><li><a href="/cs-notes/operating-system/file-system">File System</a></li><li><a aria-current="page" class="" href="/cs-notes/operating-system/inter-process-communication">Inter-process Communication</a></li><li><a href="/cs-notes/operating-system/memory-management">Memory Management</a></li><li><a href="/cs-notes/operating-system/process-and-thread">Process and thread</a></li></ul></li></ul></nav></div><div class="m1dsv0mj"><main class="c1swtufw"><div class="blog-post-container"><div class="blog-post"><h1>Inter-process Communication</h1><p>1 minutes ago</p><div class="blog-post-content"><h2>Race Condition and Critical Regions</h2>
<p><strong>Race condition</strong> can happen when two or more processes write or read some shared data. To avoid race condition, we need to enforce <strong>mutual exclusion</strong> on access to shared data.</p>
<p>The <span class="u">part of program</span> where the shared memory is accessed is called the <strong>critical region</strong>.</p>
<h2>Achieving Mutual Exclusion</h2>
<p>There are many apporches to achieve mutual exclu-
sion, so that while one process is busy updating shared memory in its critical region, no other process will enter. There are different hardware and software approaches, some employee a technique called <strong>busy waiting</strong>, where you would continuously test for some condition to become true before entering critical region.</p>
<h3>(1) <strong>Disabling Interrupts</strong></h3>
<p>This is the simplest solution, to turn off interrupt on CPU will switching to other process in the middle of critical regions. But It is generally unattractive because the waiting time for user process can be arbitrary, and achieves low concurrency. Also it does not work for multiprocessor systems, because disabling interrupt for one CPU does not prevent others from running processes. However, it is convinient for the kernel to disable interrupts for some instructions.</p>
<p>In conclusion this can be useful within the operating system itself, but not for general user processes.</p>
<h3>(2) <strong>Software Approach</strong></h3>
<p>By opting a software approach, the programmer need to code in a way where access to shared data is safe. Examples are Dekker's algorithm and Peterson's algorithm, which uses the idea of taking turns and lock variables.</p>
<p>Below snippet shows Peterson's algorithm, before using shared variables, each process call the <code class="language-text">enter_region</code> method, and after leaving the critical region, call <code class="language-text">leave_region</code>.</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">define</span> FALSE 0</span>
<span class="token macro property">#<span class="token directive keyword">define</span> TRUE 1</span>
<span class="token macro property">#<span class="token directive keyword">define</span> N 2 </span><span class="token comment">// number of processes</span>

<span class="token keyword">int</span> turn<span class="token punctuation">;</span>               <span class="token comment">// whose turn is it?</span>
<span class="token keyword">int</span> interested<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment">// all values initially 0 (FALSE)</span>

<span class="token keyword">void</span> <span class="token function">enter_region</span><span class="token punctuation">(</span><span class="token keyword">int</span> process<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// process is 0 or 1</span>
    <span class="token keyword">int</span> other <span class="token operator">=</span> <span class="token number">1</span> âˆ’ process<span class="token punctuation">;</span>        <span class="token comment">// the other process</span>
    interested<span class="token punctuation">[</span>process<span class="token punctuation">]</span> <span class="token operator">=</span> TRUE<span class="token punctuation">;</span>     <span class="token comment">// show that you are interested</span>
    turn <span class="token operator">=</span> process<span class="token punctuation">;</span>                 <span class="token comment">// set flag</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>turn <span class="token operator">==</span> process <span class="token operator">&amp;&amp;</span> interested<span class="token punctuation">[</span>other<span class="token punctuation">]</span> <span class="token operator">==</span> TRUE<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null statement</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">leave_region</span><span class="token punctuation">(</span><span class="token keyword">int</span> process<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    interested<span class="token punctuation">[</span>process<span class="token punctuation">]</span> <span class="token operator">=</span> FALSE<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>(3) <strong><code class="language-text">TSL</code> and <code class="language-text">XCHG</code></strong></h3>
<p>the <code class="language-text">TSL</code> (or <strong>Test, and Set Lock</strong>) instruction reads the content of memory word <code class="language-text">lock</code> and stores a non-zero value at the that address. <code class="language-text">TSL</code> operation is indivisible (<strong>atomic</strong>), it will lock the memory bus and prohibit other CPU from accessing the memory word until its done.</p>
<p><code class="language-text">TSL</code> can be used to implement the lock variable, and with busy waiting we can achieve mutual exclusion. A lock that uses busy waiting is called a <strong>spin lock</strong></p>
<p>pseudo assembly code showing how it works:</p>
<div class="gatsby-highlight" data-language="assembly"><pre class="language-assembly"><code class="language-assembly">enter_region:
    TSL REGISTER,LOCK   | copy value to register and set lock to 1
    CMP REGISTER,#0     | compare lock value with 0
    JNE enter_region    | infinite loop if non-zero, busy waiting
    RET                 | else return (to continue to critical region)

leave_region:
    MOVE LOCK,#0        | set lock back to 0
    RET</code></pre></div>
<p><code class="language-text">XCHG</code> instruction is an alternative to <code class="language-text">TSL</code>, which exchange content of two memory location, <span class="u">atomically</span>. Intel x86 CPU uses XCHG for low-level synchronization.</p>
<h3>(4) <strong>Semaphore</strong></h3>
<p>Semaphores uses sleep/wake-up instead of busy waiting. A semaphore need to be initialized with a value, and it has 2 <strong>atomic</strong> operations:</p>
<ul>
<li><strong>down</strong>: checks if value > 0. If so, decrement value and continue, else put process to sleep, without completing down.</li>
<li><strong>up</strong>: increment value, and choose a sleeping process (if any) to wakeup and complete its down operation.</li>
</ul>
<p>Semaphore can be use as mutex, or for synchronization.</p>
<h4>Mutexes</h4>
<h3>(5) <strong>Monitor</strong></h3>
<p>With semaphores/mutexes, developer must be very careful or else it could cause subtle errors. Monitors are here to provide a easier and less error-prone way to work with synchronization.</p>
<p>Monitor is a programming language concept, and its special behaviors have to be implemented by the language's compiler.</p>
<p>A monitor is a collection of procedures, variables and data structures that are grouped together in a special kind of module. Proccess can call the procedures but they cannot directly access the internal data. <span class="u">Monitors have an important property that, there can be only one process active in the monitor at any instant.</span></p>
<p>typically when a process calls a monitor procedure, the compiler will add the check to see if any other process is currently active within the monitor. If so, the calling process will be suspended until the other process left. Else the calling process is allowed to enter.</p>
<p>Additionally we use <strong>condition variables</strong> and <code class="language-text">wait</code>/<code class="language-text">signal</code> operation, to suspend and wakeup processes. To aviod having 2 active processes when wake-up(signal), there are a few solutions:</p>
<ul>
<li>Hansen: enforce the rule that whenever a process does a <code class="language-text">signal</code>, it must exit immediately.</li>
<li>Hoare: if P does signal and wake-up Q, suspend P and let newly awaken Q run.</li>
<li>MESA: if P signal, P continue to run and only allow the waiting process to run when P exits. (additional condition check is required after the waiting process starts running, because condition could change).</li>
</ul>
<h4>Application: Java</h4>
<p>In Java, we can use the <code class="language-text">synchronized</code> keyword with <code class="language-text">wait</code>/<code class="language-text">notify</code> to construct the monitor.</p>
<h3>(6) Send/Recieve</h3>
<p>Message passing allows passing of more complex message, it uses 2 primitives <code class="language-text">send</code> and <code class="language-text">recieve</code>.</p>
<h3>(7) Barriers</h3>
<p>Barrier primitive is a way to synchronize multiple process in phases. Barrier ensures that no process can advance to the next phase util all processes complete the current phase.</p>
<h2>Concurrency in POSIX Threads</h2>
<p>POSIX Threads (usually pthreads), is an execution model independent from language.</p>
<p>pthread<em>mutex</em>init
pthread<em>mutex</em>init
pthread<em>mutex</em>init
pthread<em>mutex</em>init
pthread<em>mutex</em>init</p>
<p>pthread<em>cond</em>init
pthread<em>cond</em>init
pthread<em>cond</em>init
pthread<em>cond</em>init
pthread<em>cond</em>init</p>
<h2>IPC Mechanism in Linux</h2></div></div></div></main></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/operating-system/inter-process-communication";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-3326c647442d9cdf5b1f.js"],"component---src-pages-404-js":["/component---src-pages-404-js-005d451c2fb3da42cb0f.js"],"component---src-pages-index-js":["/component---src-pages-index-js-b412d5317ae6b05c9f06.js"],"component---src-templates-notes-js":["/component---src-templates-notes-js-d8a721f12764927d7a7b.js"]};/*]]>*/</script><script src="/cs-notes/component---src-templates-notes-js-d8a721f12764927d7a7b.js" async=""></script><script src="/cs-notes/3925cf68b2c2d0cc1d85efad3e08a114191829f9-472ce0b777b01331616f.js" async=""></script><script src="/cs-notes/styles-6b8affa5cc22cb60670e.js" async=""></script><script src="/cs-notes/app-3326c647442d9cdf5b1f.js" async=""></script><script src="/cs-notes/framework-a74044b4add31353c05b.js" async=""></script><script src="/cs-notes/webpack-runtime-5bb415d6ec02a3077fde.js" async=""></script></body></html>